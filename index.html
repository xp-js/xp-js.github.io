<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>XP.js Desktop</title>
<link rel="stylesheet" href="https://unpkg.com/xp.css">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

/* Startup GIF fullscreen */
#startup {
  position: absolute;
  width: 100%;
  height: 100%;
  background: url('/img/startup.gif') center center no-repeat;
  background-size: cover;
  z-index: 9999;
}

/* Desktop */
#desktop {
  display: none;
  width: 100%;
  height: 100%;
  background: url('/img/Windows XP Wallpaper.jpeg') center center no-repeat;
  background-size: cover;
  position: relative;
}

/* Zvislé ikony napravo */
#icons {
  position: absolute;
  top: 50px;
  right: 20px;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

#icons img {
  width: 48px;
  height: 48px;
  cursor: url('/img/Cursor Hand.png'), pointer;
}

/* Cursor default */
body {
  cursor: url('/img/Cursor Basic.png'), auto;
}

/* Taskbar */
#taskbar {
  position: absolute;
  bottom: 0;
  width: 100%;
  height: 40px;
  background-color: #245DDA;
  display: flex;
  align-items: center;
  padding: 0 5px;
  box-sizing: border-box;
  color: white;
}

#start-button {
  width: 70px;
  height: 34px;
  background: url('/img/Windows XP Start Button.png') no-repeat center center;
  background-size: contain;
  border: none;
  cursor: pointer;
}

#start-menu {
  position: absolute;
  bottom: 40px;
  left: 0;
  width: 220px;
  background: #c0c0c0;
  border: 2px solid #000;
  display: none;
  flex-direction: column;
  padding: 5px;
  z-index: 1000;
}

#start-menu button {
  margin: 2px 0;
  cursor: pointer;
  text-align: left;
}

/* XP.css windows already include title-bar buttons */
.window {
  width: 400px;
  position: absolute;
  top: 100px;
  left: 100px;
  display: none;
  z-index: 999;
  transition: opacity 0.8s ease;
}

/* Error window styling */
.error-window .title-bar {
  background-color: #000080;
  color: white;
}

.error-window .window-body {
  display: flex;
  align-items: center;
  gap: 10px;
}

.error-window img {
  width: 32px;
  height: 32px;
}
</style>
</head>
<body>

<div id="startup"></div>

<div id="desktop">
  <!-- Ikony -->
  <div id="icons">
    <img src="/img/Text Document.png" title="Notepad" onclick="openWindow('notepad')">
    <img src="/img/CMD.png" title="Command Prompt" onclick="openWindow('cmd')">
    <img src="/img/My Computer.webp" title="My Computer" onclick="openWindow('mycomputer')">
    <img src="/img/Folder.png" title="File Explorer" onclick="openWindow('fileexplorer')">
    <img src="/img/Internet Explorer.png" title="Internet Explorer" onclick="openWindow('ieerror')">
    <img src="/img/Recycle Bin.png" title="Recycle Bin" onclick="openWindow('recycle')">
  </div>

  <!-- XP.css windows -->
  <div id="notepad" class="window">
    <div class="title-bar">
      <div class="title-bar-text">Notepad</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize"></button>
        <button aria-label="Maximize"></button>
        <button aria-label="Close" onclick="closeWindow('notepad')"></button>
      </div>
    </div>
    <div class="window-body">
      <textarea style="width:100%;height:150px;"></textarea>
    </div>
  </div>

  <div id="cmd" class="window">
    <div class="title-bar">
      <div class="title-bar-text">Command Prompt</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize"></button>
        <button aria-label="Maximize"></button>
        <button aria-label="Close" onclick="closeWindow('cmd')"></button>
      </div>
    </div>
    <div class="window-body">
      <p>C:\Users\You&gt;_</p>
    </div>
  </div>

  <div id="mycomputer" class="window">
    <div class="title-bar">
      <div class="title-bar-text">My Computer</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize"></button>
        <button aria-label="Maximize"></button>
        <button aria-label="Close" onclick="closeWindow('mycomputer')"></button>
      </div>
    </div>
    <div class="window-body">
      <ul>
        <li>Local Disk (C:)</li>
        <li>Documents</li>
        <li>Pictures</li>
      </ul>
    </div>
  </div>

  <div id="fileexplorer" class="window">
    <div class="title-bar">
      <div class="title-bar-text">File Explorer</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize"></button>
        <button aria-label="Maximize"></button>
        <button aria-label="Close" onclick="closeWindow('fileexplorer')"></button>
      </div>
    </div>
    <div class="window-body">
      <ul>
        <li>Documents</li>
        <li>Pictures</li>
        <li>Downloads</li>
      </ul>
    </div>
  </div>

  <div id="recycle" class="window">
    <div class="title-bar">
      <div class="title-bar-text">Recycle Bin</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize"></button>
        <button aria-label="Maximize"></button>
        <button aria-label="Close" onclick="closeWindow('recycle')"></button>
      </div>
    </div>
    <div class="window-body">
      <p>Recycle Bin is empty</p>
    </div>
  </div>

  <div id="ieerror" class="window error-window">
    <div class="title-bar">
      <div class="title-bar-text">Internet Explorer</div>
      <div class="title-bar-controls">
        <button aria-label="Minimize"></button>
        <button aria-label="Maximize"></button>
        <button aria-label="Close" onclick="closeWindow('ieerror')"></button>
      </div>
    </div>
    <div class="window-body">
      <img src="/img/Error.png" alt="Error">
      <p>Internet Explorer is not available. Please use another browser.</p>
    </div>
  </div>

</div>

<!-- Taskbar -->
<div id="taskbar">
  <button id="start-button" onclick="toggleStartMenu()"></button>
</div>

<!-- Start menu -->
<div id="start-menu">
  <button onclick="openWindow('notepad')">Notepad</button>
  <button onclick="openWindow('cmd')">Command Prompt</button>
  <button onclick="openWindow('mycomputer')">My Computer</button>
  <button onclick="openWindow('fileexplorer')">File Explorer</button>
</div>

<script>
  // Startup GIF 6s -> desktop
  setTimeout(() => {
    document.getElementById('startup').style.display = 'none';
    document.getElementById('desktop').style.display = 'block';
  }, 6000);

  // Start menu
  function toggleStartMenu() {
    const menu = document.getElementById('start-menu');
    menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
  }

  // Open window
  function openWindow(id) {
    const win = document.getElementById(id);
    win.style.opacity = 0;
    win.style.display = 'block';
    bringToFront(win);
    setTimeout(() => { win.style.opacity = 1; }, 50); // animácia 0.8s
  }

  function closeWindow(id) {
    document.getElementById(id).style.display = 'none';
  }

  // Drag & Drop
  let draggedWindow = null;
  let offsetX = 0, offsetY = 0;

  document.addEventListener('mousedown', (e) => {
    if (e.target.closest('.title-bar')) {
      draggedWindow = e.target.closest('.window');
      const rect = draggedWindow.getBoundingClientRect();
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;
      bringToFront(draggedWindow);
    }
  });

  document.addEventListener('mousemove', (e) => {
    if (draggedWindow) {
      draggedWindow.style.left = (e.clientX - offsetX) + 'px';
      draggedWindow.style.top = (e.clientY - offsetY) + 'px';
    }
  });

  document.addEventListener('mouseup', () => { draggedWindow = null; });

  function bringToFront(win) {
    document.querySelectorAll('.window').forEach(w => w.style.zIndex = 998);
    win.style.zIndex = 999;
  }
</script>

</body>
</html>
